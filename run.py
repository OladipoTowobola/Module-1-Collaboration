{
 "cells": [
  {
   "cell_type": "code",
   "execution_count": 1,
   "id": "bd4c5683-e287-4c56-806e-b4c90216d8b9",
   "metadata": {},
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "Defaulting to user installation because normal site-packages is not writeable\n",
      "Requirement already satisfied: numpy in c:\\programdata\\anaconda3\\lib\\site-packages (2.3.5)\n",
      "Note: you may need to restart the kernel to use updated packages.\n"
     ]
    }
   ],
   "source": [
    "pip install numpy"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": null,
   "id": "68a3a2a8-3a69-4bd6-96e6-28d6d6c329c4",
   "metadata": {},
   "outputs": [],
   "source": [
    "import tkinter as tk\n",
    "from tkinter import ttk, messagebox, scrolledtext\n",
    "import json\n",
    "import time\n",
    "import threading\n",
    "from datetime import datetime\n",
    "from collections import OrderedDict\n",
    "from enum import Enum\n",
    "import numpy as np\n",
    "import pickle\n",
    "\n",
    "# ==================== ENUM CLASSES ====================\n",
    "class PowerLevel(Enum):\n",
    "    LOW = 30\n",
    "    MEDIUM = 60\n",
    "    HIGH = 100\n",
    "\n",
    "class CookingStage(Enum):\n",
    "    DEFROST = \"defrost\"\n",
    "    COOK = \"cook\"\n",
    "    WARM = \"warm\"\n",
    "    REHEAT = \"reheat\"\n",
    "\n",
    "# ==================== CORE CLASSES ====================\n",
    "\n",
    "class MicrowaveEngine:\n",
    "    \"\"\"Handles cooking logic, timing, and power management\"\"\"\n",
    "    \n",
    "    def __init__(self):\n",
    "        self.is_running = False\n",
    "        self.remaining_time = 0\n",
    "        self.current_power = PowerLevel.HIGH.value\n",
    "        self.current_stage = None\n",
    "        self.timer_thread = None\n",
    "        self.sensor_data = np.zeros(10)  # Array for sensor readings\n",
    "        self.cooking_history = []  # List of cooking sessions\n",
    "        self.defrost_table = {  # Dictionary for defrost times\n",
    "            \"chicken\": {\"thin\": 3, \"thick\": 6},\n",
    "            \"beef\": {\"thin\": 4, \"thick\": 8},\n",
    "            \"fish\": {\"thin\": 2, \"thick\": 4},\n",
    "            \"vegetables\": {\"thin\": 2, \"thick\": 3}\n",
    "        }\n",
    "        self.power_settings = OrderedDict([  # OrderedDict for power levels\n",
    "            (\"Low (30%)\", 30),\n",
    "            (\"Medium (60%)\", 60),\n",
    "            (\"High (100%)\", 100)\n",
    "        ])\n",
    "        \n",
    "    def start_cooking(self, time_seconds, power_level=100, stage=CookingStage.COOK):\n",
    "        \"\"\"Start cooking with specified parameters\"\"\"\n",
    "        if self.is_running:\n",
    "            return False\n",
    "        \n",
    "        self.is_running = True\n",
    "        self.remaining_time = time_seconds\n",
    "        self.current_power = power_level\n",
    "        self.current_stage = stage\n",
    "        \n",
    "        # Start timer thread\n",
    "        self.timer_thread = threading.Thread(target=self._cooking_timer, daemon=True)\n",
    "        self.timer_thread.start()\n",
    "        \n",
    "        # Record start time\n",
    "        session = {\n",
    "            \"start_time\": datetime.now().strftime(\"%Y-%m-%d %H:%M:%S\"),\n",
    "            \"duration\": time_seconds,\n",
    "            \"power\": power_level,\n",
    "            \"stage\": stage.value\n",
    "        }\n",
    "        self.cooking_history.append(session)\n",
    "        \n",
    "        return True\n",
    "    \n",
    "    def _cooking_timer(self):\n",
    "        \"\"\"Internal timer method\"\"\"\n",
    "        while self.remaining_time > 0 and self.is_running:\n",
    "            time.sleep(1)\n",
    "            self.remaining_time -= 1\n",
    "            \n",
    "            # Simulate sensor data collection\n",
    "            self.sensor_data = np.roll(self.sensor_data, -1)\n",
    "            self.sensor_data[-1] = np.random.uniform(20, 100)  # Simulated temperature\n",
    "            \n",
    "        self.is_running = False\n",
    "        \n",
    "    def stop_cooking(self):\n",
    "        \"\"\"Stop cooking immediately\"\"\"\n",
    "        self.is_running = False\n",
    "        self.remaining_time = 0\n",
    "        \n",
    "    def pause_cooking(self):\n",
    "        \"\"\"Pause cooking\"\"\"\n",
    "        self.is_running = False\n",
    "        \n",
    "    def resume_cooking(self):\n",
    "        \"\"\"Resume cooking\"\"\"\n",
    "        if self.remaining_time > 0:\n",
    "            self.is_running = True\n",
    "            self.timer_thread = threading.Thread(target=self._cooking_timer, daemon=True)\n",
    "            self.timer_thread.start()\n",
    "    \n",
    "    def calculate_defrost_time(self, food_type, thickness, weight_grams):\n",
    "        \"\"\"Calculate defrost time based on food type and weight\"\"\"\n",
    "        base_time = self.defrost_table.get(food_type, {}).get(thickness, 3)\n",
    "        time_minutes = base_time * (weight_grams / 500)  # Scale based on weight\n",
    "        return int(time_minutes * 60)  # Convert to seconds\n",
    "    \n",
    "    def get_cooking_history(self):\n",
    "        \"\"\"Return cooking history\"\"\"\n",
    "        return self.cooking_history\n",
    "    \n",
    "    def get_status(self):\n",
    "        \"\"\"Get current microwave status\"\"\"\n",
    "        status = {\n",
    "            \"running\": self.is_running,\n",
    "            \"remaining_time\": self.remaining_time,\n",
    "            \"current_power\": self.current_power,\n",
    "            \"current_stage\": self.current_stage.value if self.current_stage else None,\n",
    "            \"sensor_reading\": self.sensor_data[-1] if len(self.sensor_data) > 0 else 0\n",
    "        }\n",
    "        return status\n",
    "\n",
    "\n",
    "class RecipeManager:\n",
    "    \"\"\"Manages recipe storage, retrieval, and organization\"\"\"\n",
    "    \n",
    "    def __init__(self):\n",
    "        self.recipes = []  # List of recipes\n",
    "        self.categories = [\"Breakfast\", \"Lunch\", \"Dinner\", \"Dessert\", \"Snacks\"]\n",
    "        self.favorites = []  # List of favorite recipe indices\n",
    "        self.load_recipes()\n",
    "        \n",
    "        # Sample recipes if none exist\n",
    "        if not self.recipes:\n",
    "            self._create_sample_recipes()\n",
    "    \n",
    "    def _create_sample_recipes(self):\n",
    "        \"\"\"Create sample recipes for demonstration\"\"\"\n",
    "        sample_recipes = [\n",
    "            {\n",
    "                \"name\": \"Microwave Omelette\",\n",
    "                \"category\": \"Breakfast\",\n",
    "                \"ingredients\": [\"2 eggs\", \"2 tbsp milk\", \"salt\", \"pepper\", \"cheese\"],\n",
    "                \"steps\": [\"Whisk eggs and milk\", \"Microwave for 2 minutes\", \"Add cheese\", \"Microwave 30 seconds\"],\n",
    "                \"cooking_stages\": [\n",
    "                    {\"time\": 120, \"power\": 80, \"action\": \"Cook eggs\"},\n",
    "                    {\"time\": 30, \"power\": 50, \"action\": \"Melt cheese\"}\n",
    "                ],\n",
    "                \"rating\": 4.5\n",
    "            },\n",
    "            {\n",
    "                \"name\": \"Mug Cake\",\n",
    "                \"category\": \"Dessert\",\n",
    "                \"ingredients\": [\"4 tbsp flour\", \"2 tbsp sugar\", \"2 tbsp cocoa\", \"3 tbsp milk\", \"1 tbsp oil\"],\n",
    "                \"steps\": [\"Mix dry ingredients\", \"Add wet ingredients\", \"Microwave for 90 seconds\"],\n",
    "                \"cooking_stages\": [\n",
    "                    {\"time\": 90, \"power\": 70, \"action\": \"Bake cake\"}\n",
    "                ],\n",
    "                \"rating\": 4.8\n",
    "            },\n",
    "            {\n",
    "                \"name\": \"Steamed Vegetables\",\n",
    "                \"category\": \"Lunch\",\n",
    "                \"ingredients\": [\"2 cups mixed vegetables\", \"2 tbsp water\", \"1 tsp butter\", \"salt\"],\n",
    "                \"steps\": [\"Place vegetables in bowl\", \"Add water\", \"Cover and microwave for 5 minutes\"],\n",
    "                \"cooking_stages\": [\n",
    "                    {\"time\": 300, \"power\": 100, \"action\": \"Steam vegetables\"}\n",
    "                ],\n",
    "                \"rating\": 4.2\n",
    "            }\n",
    "        ]\n",
    "        \n",
    "        self.recipes.extend(sample_recipes)\n",
    "        self.save_recipes()\n",
    "    \n",
    "    def add_recipe(self, name, category, ingredients, steps, cooking_stages):\n",
    "        \"\"\"Add a new recipe\"\"\"\n",
    "        recipe = {\n",
    "            \"name\": name,\n",
    "            \"category\": category,\n",
    "            \"ingredients\": ingredients,\n",
    "            \"steps\": steps,\n",
    "            \"cooking_stages\": cooking_stages,\n",
    "            \"rating\": 0.0\n",
    "        }\n",
    "        self.recipes.append(recipe)\n",
    "        self.save_recipes()\n",
    "        return len(self.recipes) - 1\n",
    "    \n",
    "    def get_recipes_by_category(self, category):\n",
    "        \"\"\"Get recipes filtered by category\"\"\"\n",
    "        return [recipe for recipe in self.recipes if recipe[\"category\"] == category]\n",
    "    \n",
    "    def get_all_recipes(self):\n",
    "        \"\"\"Get all recipes\"\"\"\n",
    "        return self.recipes\n",
    "    \n",
    "    def search_recipes(self, query):\n",
    "        \"\"\"Search recipes by name or ingredient\"\"\"\n",
    "        results = []\n",
    "        query = query.lower()\n",
    "        for recipe in self.recipes:\n",
    "            if (query in recipe[\"name\"].lower() or \n",
    "                any(query in ing.lower() for ing in recipe[\"ingredients\"])):\n",
    "                results.append(recipe)\n",
    "        return results\n",
    "    \n",
    "    def add_to_favorites(self, recipe_index):\n",
    "        \"\"\"Add recipe to favorites\"\"\"\n",
    "        if recipe_index not in self.favorites:\n",
    "            self.favorites.append(recipe_index)\n",
    "            self.save_recipes()\n",
    "    \n",
    "    def remove_from_favorites(self, recipe_index):\n",
    "        \"\"\"Remove recipe from favorites\"\"\"\n",
    "        if recipe_index in self.favorites:\n",
    "            self.favorites.remove(recipe_index)\n",
    "            self.save_recipes()\n",
    "    \n",
    "    def get_favorites(self):\n",
    "        \"\"\"Get favorite recipes\"\"\"\n",
    "        return [self.recipes[i] for i in self.favorites if i < len(self.recipes)]\n",
    "    \n",
    "    def load_recipes(self):\n",
    "        \"\"\"Load recipes from file\"\"\"\n",
    "        try:\n",
    "            with open(\"recipes.json\", \"r\") as f:\n",
    "                data = json.load(f)\n",
    "                self.recipes = data.get(\"recipes\", [])\n",
    "                self.favorites = data.get(\"favorites\", [])\n",
    "        except FileNotFoundError:\n",
    "            self.recipes = []\n",
    "            self.favorites = []\n",
    "    \n",
    "    def save_recipes(self):\n",
    "        \"\"\"Save recipes to file\"\"\"\n",
    "        data = {\n",
    "            \"recipes\": self.recipes,\n",
    "            \"favorites\": self.favorites\n",
    "        }\n",
    "        with open(\"recipes.json\", \"w\") as f:\n",
    "            json.dump(data, f, indent=2)\n",
    "\n",
    "\n",
    "class UserInterface:\n",
    "    \"\"\"Main GUI controller and display manager\"\"\"\n",
    "    \n",
    "    def __init__(self, root):\n",
    "        self.root = root\n",
    "        self.root.title(\"Smart Microwave Oven System\")\n",
    "        self.root.geometry(\"1200x700\")\n",
    "        \n",
    "        # Initialize core components\n",
    "        self.engine = MicrowaveEngine()\n",
    "        self.recipe_manager = RecipeManager()\n",
    "        \n",
    "        # Create containers\n",
    "        self.create_widgets()\n",
    "        self.setup_layout()\n",
    "        \n",
    "        # Start status update thread\n",
    "        self.update_status()\n",
    "    \n",
    "    def create_widgets(self):\n",
    "        \"\"\"Create all GUI widgets\"\"\"\n",
    "        \n",
    "        # Notebook for tabs\n",
    "        self.notebook = ttk.Notebook(self.root)\n",
    "        \n",
    "        # ========== CONTROL PANEL TAB ==========\n",
    "        self.control_frame = ttk.Frame(self.notebook)\n",
    "        self.notebook.add(self.control_frame, text=\"Control Panel\")\n",
    "        \n",
    "        # Display\n",
    "        self.display_var = tk.StringVar(value=\"READY\")\n",
    "        self.display = tk.Label(self.control_frame, textvariable=self.display_var, \n",
    "                               font=(\"Arial\", 24), bg=\"black\", fg=\"green\", \n",
    "                               width=30, height=2)\n",
    "        \n",
    "        # Timer controls\n",
    "        self.time_var = tk.StringVar(value=\"1:00\")\n",
    "        self.time_entry = ttk.Entry(self.control_frame, textvariable=self.time_var, \n",
    "                                   font=(\"Arial\", 14), width=10, justify=\"center\")\n",
    "        \n",
    "        # Power level selector\n",
    "        self.power_var = tk.StringVar(value=\"High (100%)\")\n",
    "        self.power_combo = ttk.Combobox(self.control_frame, textvariable=self.power_var,\n",
    "                                       values=list(self.engine.power_settings.keys()),\n",
    "                                       state=\"readonly\", width=20)\n",
    "        \n",
    "        # Cooking mode selector\n",
    "        self.mode_var = tk.StringVar(value=\"Cook\")\n",
    "        self.mode_combo = ttk.Combobox(self.control_frame, textvariable=self.mode_var,\n",
    "                                      values=[stage.value.title() for stage in CookingStage],\n",
    "                                      state=\"readonly\", width=20)\n",
    "        \n",
    "        # Control buttons\n",
    "        self.start_btn = ttk.Button(self.control_frame, text=\"START\", \n",
    "                                   command=self.start_cooking, width=15)\n",
    "        self.stop_btn = ttk.Button(self.control_frame, text=\"STOP\", \n",
    "                                  command=self.stop_cooking, width=15)\n",
    "        self.pause_btn = ttk.Button(self.control_frame, text=\"PAUSE\", \n",
    "                                   command=self.pause_cooking, width=15)\n",
    "        self.quick_btn = ttk.Button(self.control_frame, text=\"QUICK 30s\", \n",
    "                                   command=lambda: self.quick_start(30), width=15)\n",
    "        \n",
    "        # Quick time buttons\n",
    "        self.quick_buttons_frame = ttk.Frame(self.control_frame)\n",
    "        for seconds in [30, 60, 90, 120]:\n",
    "            btn = ttk.Button(self.quick_buttons_frame, text=f\"{seconds}s\",\n",
    "                           command=lambda s=seconds: self.quick_start(s))\n",
    "            btn.pack(side=tk.LEFT, padx=2)\n",
    "        \n",
    "        # Status display\n",
    "        self.status_text = scrolledtext.ScrolledText(self.control_frame, \n",
    "                                                    width=50, height=10,\n",
    "                                                    font=(\"Courier\", 10))\n",
    "        \n",
    "        # ========== RECIPE TAB ==========\n",
    "        self.recipe_frame = ttk.Frame(self.notebook)\n",
    "        self.notebook.add(self.recipe_frame, text=\"Recipes\")\n",
    "        \n",
    "        # Recipe list\n",
    "        self.recipe_listbox = tk.Listbox(self.recipe_frame, width=40, height=15,\n",
    "                                        font=(\"Arial\", 11))\n",
    "        self.load_recipe_list()\n",
    "        \n",
    "        # Recipe details\n",
    "        self.recipe_details = scrolledtext.ScrolledText(self.recipe_frame,\n",
    "                                                       width=60, height=15,\n",
    "                                                       font=(\"Arial\", 10))\n",
    "        \n",
    "        # Recipe controls\n",
    "        self.cook_recipe_btn = ttk.Button(self.recipe_frame, text=\"Cook This Recipe\",\n",
    "                                         command=self.cook_selected_recipe)\n",
    "        self.favorite_btn = ttk.Button(self.recipe_frame, text=\"Add to Favorites\",\n",
    "                                      command=self.add_to_favorites)\n",
    "        \n",
    "        # Recipe search\n",
    "        self.search_var = tk.StringVar()\n",
    "        self.search_entry = ttk.Entry(self.recipe_frame, textvariable=self.search_var)\n",
    "        self.search_btn = ttk.Button(self.recipe_frame, text=\"Search\",\n",
    "                                    command=self.search_recipes)\n",
    "        \n",
    "        # ========== DEFROST TAB ==========\n",
    "        self.defrost_frame = ttk.Frame(self.notebook)\n",
    "        self.notebook.add(self.defrost_frame, text=\"Auto Defrost\")\n",
    "        \n",
    "        # Defrost controls\n",
    "        self.food_type_var = tk.StringVar(value=\"chicken\")\n",
    "        self.thickness_var = tk.StringVar(value=\"thin\")\n",
    "        self.weight_var = tk.IntVar(value=500)\n",
    "        \n",
    "        ttk.Label(self.defrost_frame, text=\"Food Type:\").grid(row=0, column=0, padx=5, pady=5)\n",
    "        self.food_combo = ttk.Combobox(self.defrost_frame, textvariable=self.food_type_var,\n",
    "                                      values=list(self.engine.defrost_table.keys()),\n",
    "                                      state=\"readonly\")\n",
    "        self.food_combo.grid(row=0, column=1, padx=5, pady=5)\n",
    "        \n",
    "        ttk.Label(self.defrost_frame, text=\"Thickness:\").grid(row=1, column=0, padx=5, pady=5)\n",
    "        self.thickness_combo = ttk.Combobox(self.defrost_frame, textvariable=self.thickness_var,\n",
    "                                           values=[\"thin\", \"thick\"], state=\"readonly\")\n",
    "        self.thickness_combo.grid(row=1, column=1, padx=5, pady=5)\n",
    "        \n",
    "        ttk.Label(self.defrost_frame, text=\"Weight (grams):\").grid(row=2, column=0, padx=5, pady=5)\n",
    "        self.weight_scale = ttk.Scale(self.defrost_frame, from_=100, to=2000,\n",
    "                                     variable=self.weight_var, orient=tk.HORIZONTAL)\n",
    "        self.weight_scale.grid(row=2, column=1, padx=5, pady=5)\n",
    "        \n",
    "        self.weight_label = ttk.Label(self.defrost_frame, text=\"500g\")\n",
    "        self.weight_label.grid(row=2, column=2, padx=5, pady=5)\n",
    "        \n",
    "        self.calc_defrost_btn = ttk.Button(self.defrost_frame, text=\"Calculate Time\",\n",
    "                                          command=self.calculate_defrost)\n",
    "        self.calc_defrost_btn.grid(row=3, column=0, columnspan=2, pady=10)\n",
    "        \n",
    "        self.defrost_result = ttk.Label(self.defrost_frame, text=\"\", font=(\"Arial\", 12))\n",
    "        self.defrost_result.grid(row=4, column=0, columnspan=3, pady=10)\n",
    "        \n",
    "        # ========== HISTORY TAB ==========\n",
    "        self.history_frame = ttk.Frame(self.notebook)\n",
    "        self.notebook.add(self.history_frame, text=\"Cooking History\")\n",
    "        \n",
    "        # History display\n",
    "        self.history_text = scrolledtext.ScrolledText(self.history_frame,\n",
    "                                                     width=80, height=20,\n",
    "                                                     font=(\"Courier\", 10))\n",
    "        self.history_text.pack(padx=10, pady=10)\n",
    "        \n",
    "        self.refresh_history_btn = ttk.Button(self.history_frame, text=\"Refresh History\",\n",
    "                                            command=self.load_history)\n",
    "        self.refresh_history_btn.pack(pady=5)\n",
    "    \n",
    "    def setup_layout(self):\n",
    "        \"\"\"Setup widget layout\"\"\"\n",
    "        self.notebook.pack(fill=tk.BOTH, expand=True, padx=10, pady=10)\n",
    "        \n",
    "        # Control Panel Layout\n",
    "        self.display.pack(pady=10)\n",
    "        \n",
    "        ttk.Label(self.control_frame, text=\"Time (MM:SS):\").pack(pady=5)\n",
    "        self.time_entry.pack(pady=5)\n",
    "        \n",
    "        ttk.Label(self.control_frame, text=\"Power Level:\").pack(pady=5)\n",
    "        self.power_combo.pack(pady=5)\n",
    "        \n",
    "        ttk.Label(self.control_frame, text=\"Cooking Mode:\").pack(pady=5)\n",
    "        self.mode_combo.pack(pady=5)\n",
    "        \n",
    "        self.quick_buttons_frame.pack(pady=10)\n",
    "        \n",
    "        # Control buttons in a frame\n",
    "        btn_frame = ttk.Frame(self.control_frame)\n",
    "        self.start_btn.pack(side=tk.LEFT, padx=5, pady=10)\n",
    "        self.stop_btn.pack(side=tk.LEFT, padx=5, pady=10)\n",
    "        self.pause_btn.pack(side=tk.LEFT, padx=5, pady=10)\n",
    "        self.quick_btn.pack(side=tk.LEFT, padx=5, pady=10)\n",
    "        btn_frame.pack(pady=10)\n",
    "        \n",
    "        ttk.Label(self.control_frame, text=\"System Status:\").pack(pady=5)\n",
    "        self.status_text.pack(pady=5, fill=tk.BOTH, expand=True)\n",
    "        \n",
    "        # Recipe Tab Layout\n",
    "        recipe_left = ttk.Frame(self.recipe_frame)\n",
    "        recipe_right = ttk.Frame(self.recipe_frame)\n",
    "        \n",
    "        recipe_left.pack(side=tk.LEFT, padx=10, pady=10, fill=tk.BOTH, expand=True)\n",
    "        recipe_right.pack(side=tk.RIGHT, padx=10, pady=10, fill=tk.BOTH, expand=True)\n",
    "        \n",
    "        # Recipe list on left\n",
    "        ttk.Label(recipe_left, text=\"Recipes\", font=(\"Arial\", 14, \"bold\")).pack()\n",
    "        self.recipe_listbox.pack(pady=10, fill=tk.BOTH, expand=True)\n",
    "        \n",
    "        # Search on left\n",
    "        search_frame = ttk.Frame(recipe_left)\n",
    "        self.search_entry.pack(side=tk.LEFT, padx=5, fill=tk.X, expand=True)\n",
    "        self.search_btn.pack(side=tk.RIGHT, padx=5)\n",
    "        search_frame.pack(pady=5, fill=tk.X)\n",
    "        \n",
    "        # Recipe details on right\n",
    "        ttk.Label(recipe_right, text=\"Recipe Details\", font=(\"Arial\", 14, \"bold\")).pack()\n",
    "        self.recipe_details.pack(pady=10, fill=tk.BOTH, expand=True)\n",
    "        \n",
    "        # Recipe buttons\n",
    "        self.cook_recipe_btn.pack(side=tk.LEFT, padx=5, pady=5)\n",
    "        self.favorite_btn.pack(side=tk.RIGHT, padx=5, pady=5)\n",
    "        \n",
    "        # Bind recipe selection\n",
    "        self.recipe_listbox.bind('<<ListboxSelect>>', self.on_recipe_select)\n",
    "    \n",
    "    def update_status(self):\n",
    "        \"\"\"Update display and status panel\"\"\"\n",
    "        status = self.engine.get_status()\n",
    "        \n",
    "        # Update display\n",
    "        if status[\"running\"]:\n",
    "            mins = status[\"remaining_time\"] // 60\n",
    "            secs = status[\"remaining_time\"] % 60\n",
    "            self.display_var.set(f\"COOKING {mins:02d}:{secs:02d}\")\n",
    "            self.display.config(fg=\"red\")\n",
    "        else:\n",
    "            if status[\"remaining_time\"] == 0:\n",
    "                self.display_var.set(\"READY\")\n",
    "                self.display.config(fg=\"green\")\n",
    "            else:\n",
    "                mins = status[\"remaining_time\"] // 60\n",
    "                secs = status[\"remaining_time\"] % 60\n",
    "                self.display_var.set(f\"PAUSED {mins:02d}:{secs:02d}\")\n",
    "                self.display.config(fg=\"orange\")\n",
    "        \n",
    "        # Update status text\n",
    "        self.status_text.delete(1.0, tk.END)\n",
    "        self.status_text.insert(1.0, \n",
    "            f\"Microwave Status:\\n\"\n",
    "            f\"{'='*40}\\n\"\n",
    "            f\"Running: {status['running']}\\n\"\n",
    "            f\"Remaining Time: {status['remaining_time']}s\\n\"\n",
    "            f\"Current Power: {status['current_power']}%\\n\"\n",
    "            f\"Cooking Stage: {status['current_stage']}\\n\"\n",
    "            f\"Sensor Reading: {status['sensor_reading']:.1f}°C\\n\"\n",
    "            f\"{'='*40}\\n\"\n",
    "            f\"Recipes Loaded: {len(self.recipe_manager.recipes)}\\n\"\n",
    "            f\"Favorites: {len(self.recipe_manager.favorites)}\\n\"\n",
    "            f\"Cooking Sessions: {len(self.engine.cooking_history)}\"\n",
    "        )\n",
    "        \n",
    "        # Update weight label\n",
    "        self.weight_label.config(text=f\"{self.weight_var.get()}g\")\n",
    "        \n",
    "        # Schedule next update\n",
    "        self.root.after(1000, self.update_status)\n",
    "    \n",
    "    def start_cooking(self):\n",
    "        \"\"\"Start cooking with entered parameters\"\"\"\n",
    "        try:\n",
    "            # Parse time input (accepts MM:SS or seconds)\n",
    "            time_str = self.time_var.get()\n",
    "            if \":\" in time_str:\n",
    "                mins, secs = map(int, time_str.split(\":\"))\n",
    "                time_seconds = mins * 60 + secs\n",
    "            else:\n",
    "                time_seconds = int(time_str)\n",
    "            \n",
    "            # Get power level\n",
    "            power_str = self.power_var.get()\n",
    "            power_level = self.engine.power_settings.get(power_str, 100)\n",
    "            \n",
    "            # Get cooking stage\n",
    "            mode_str = self.mode_var.get().lower()\n",
    "            stage = CookingStage(mode_str)\n",
    "            \n",
    "            # Start cooking\n",
    "            success = self.engine.start_cooking(time_seconds, power_level, stage)\n",
    "            \n",
    "            if success:\n",
    "                messagebox.showinfo(\"Cooking Started\", \n",
    "                                  f\"Cooking started for {time_seconds} seconds at {power_level}% power\")\n",
    "            else:\n",
    "                messagebox.showwarning(\"Already Cooking\", \"Microwave is already running!\")\n",
    "                \n",
    "        except ValueError:\n",
    "            messagebox.showerror(\"Invalid Input\", \"Please enter a valid time (MM:SS or seconds)\")\n",
    "        except Exception as e:\n",
    "            messagebox.showerror(\"Error\", f\"Failed to start cooking: {str(e)}\")\n",
    "    \n",
    "    def stop_cooking(self):\n",
    "        \"\"\"Stop cooking\"\"\"\n",
    "        self.engine.stop_cooking()\n",
    "        messagebox.showinfo(\"Stopped\", \"Cooking stopped\")\n",
    "    \n",
    "    def pause_cooking(self):\n",
    "        \"\"\"Pause cooking\"\"\"\n",
    "        if self.engine.is_running:\n",
    "            self.engine.pause_cooking()\n",
    "            messagebox.showinfo(\"Paused\", \"Cooking paused\")\n",
    "        else:\n",
    "            messagebox.showinfo(\"Resumed\", \"Cooking resumed\")\n",
    "            self.engine.resume_cooking()\n",
    "    \n",
    "    def quick_start(self, seconds):\n",
    "        \"\"\"Quick start with preset time\"\"\"\n",
    "        self.time_var.set(str(seconds))\n",
    "        self.start_cooking()\n",
    "    \n",
    "    def load_recipe_list(self):\n",
    "        \"\"\"Load recipes into listbox\"\"\"\n",
    "        self.recipe_listbox.delete(0, tk.END)\n",
    "        for i, recipe in enumerate(self.recipe_manager.recipes):\n",
    "            star = \"★ \" if i in self.recipe_manager.favorites else \"\"\n",
    "            self.recipe_listbox.insert(tk.END, f\"{star}{recipe['name']} ({recipe['category']})\")\n",
    "    \n",
    "    def on_recipe_select(self, event):\n",
    "        \"\"\"Handle recipe selection\"\"\"\n",
    "        selection = self.recipe_listbox.curselection()\n",
    "        if selection:\n",
    "            index = selection[0]\n",
    "            recipe = self.recipe_manager.recipes[index]\n",
    "            \n",
    "            # Display recipe details\n",
    "            self.recipe_details.delete(1.0, tk.END)\n",
    "            self.recipe_details.insert(1.0,\n",
    "                f\"Recipe: {recipe['name']}\\n\"\n",
    "                f\"{'='*40}\\n\"\n",
    "                f\"Category: {recipe['category']}\\n\"\n",
    "                f\"Rating: {recipe['rating']}/5.0\\n\\n\"\n",
    "                f\"Ingredients:\\n\"\n",
    "                f\"{'-'*20}\\n\"\n",
    "            )\n",
    "            \n",
    "            for ingredient in recipe['ingredients']:\n",
    "                self.recipe_details.insert(tk.END, f\"• {ingredient}\\n\")\n",
    "            \n",
    "            self.recipe_details.insert(tk.END,\n",
    "                f\"\\nSteps:\\n\"\n",
    "                f\"{'-'*20}\\n\"\n",
    "            )\n",
    "            \n",
    "            for i, step in enumerate(recipe['steps'], 1):\n",
    "                self.recipe_details.insert(tk.END, f\"{i}. {step}\\n\")\n",
    "            \n",
    "            self.recipe_details.insert(tk.END,\n",
    "                f\"\\nCooking Instructions:\\n\"\n",
    "                f\"{'-'*20}\\n\"\n",
    "            )\n",
    "            \n",
    "            for stage in recipe['cooking_stages']:\n",
    "                self.recipe_details.insert(tk.END,\n",
    "                    f\"• {stage['action']}: {stage['time']}s at {stage['power']}% power\\n\")\n",
    "    \n",
    "    def cook_selected_recipe(self):\n",
    "        \"\"\"Start cooking selected recipe\"\"\"\n",
    "        selection = self.recipe_listbox.curselection()\n",
    "        if not selection:\n",
    "            messagebox.showwarning(\"No Selection\", \"Please select a recipe first\")\n",
    "            return\n",
    "        \n",
    "        index = selection[0]\n",
    "        recipe = self.recipe_manager.recipes[index]\n",
    "        \n",
    "        # Start with first cooking stage\n",
    "        if recipe['cooking_stages']:\n",
    "            stage = recipe['cooking_stages'][0]\n",
    "            self.time_var.set(str(stage['time']))\n",
    "            power_key = [k for k, v in self.engine.power_settings.items() \n",
    "                        if v == stage['power']]\n",
    "            if power_key:\n",
    "                self.power_var.set(power_key[0])\n",
    "            self.start_cooking()\n",
    "    \n",
    "    def add_to_favorites(self):\n",
    "        \"\"\"Add current recipe to favorites\"\"\"\n",
    "        selection = self.recipe_listbox.curselection()\n",
    "        if selection:\n",
    "            index = selection[0]\n",
    "            self.recipe_manager.add_to_favorites(index)\n",
    "            self.load_recipe_list()\n",
    "            messagebox.showinfo(\"Added\", \"Recipe added to favorites!\")\n",
    "    \n",
    "    def search_recipes(self):\n",
    "        \"\"\"Search for recipes\"\"\"\n",
    "        query = self.search_var.get()\n",
    "        if not query:\n",
    "            self.load_recipe_list()\n",
    "            return\n",
    "        \n",
    "        results = self.recipe_manager.search_recipes(query)\n",
    "        self.recipe_listbox.delete(0, tk.END)\n",
    "        \n",
    "        for i, recipe in enumerate(results):\n",
    "            # Find original index for favorite star\n",
    "            original_index = self.recipe_manager.recipes.index(recipe)\n",
    "            star = \"★ \" if original_index in self.recipe_manager.favorites else \"\"\n",
    "            self.recipe_listbox.insert(tk.END, f\"{star}{recipe['name']} ({recipe['category']})\")\n",
    "    \n",
    "    def calculate_defrost(self):\n",
    "        \"\"\"Calculate defrost time\"\"\"\n",
    "        food_type = self.food_type_var.get()\n",
    "        thickness = self.thickness_var.get()\n",
    "        weight = self.weight_var.get()\n",
    "        \n",
    "        try:\n",
    "            time_seconds = self.engine.calculate_defrost_time(food_type, thickness, weight)\n",
    "            mins = time_seconds // 60\n",
    "            secs = time_seconds % 60\n",
    "            \n",
    "            self.defrost_result.config(\n",
    "                text=f\"Defrost Time: {mins} minutes {secs} seconds\\n\"\n",
    "                     f\"for {weight}g of {food_type} ({thickness} cut)\"\n",
    "            )\n",
    "            \n",
    "            # Set the calculated time\n",
    "            self.time_var.set(f\"{mins}:{secs:02d}\")\n",
    "            self.mode_var.set(\"Defrost\")\n",
    "            \n",
    "        except Exception as e:\n",
    "            messagebox.showerror(\"Calculation Error\", str(e))\n",
    "    \n",
    "    def load_history(self):\n",
    "        \"\"\"Load cooking history\"\"\"\n",
    "        history = self.engine.get_cooking_history()\n",
    "        self.history_text.delete(1.0, tk.END)\n",
    "        \n",
    "        if not history:\n",
    "            self.history_text.insert(1.0, \"No cooking history available.\")\n",
    "            return\n",
    "        \n",
    "        self.history_text.insert(1.0, \"COOKING HISTORY\\n\")\n",
    "        self.history_text.insert(tk.END, \"=\"*60 + \"\\n\\n\")\n",
    "        \n",
    "        for i, session in enumerate(reversed(history), 1):\n",
    "            self.history_text.insert(tk.END,\n",
    "                f\"Session {i}:\\n\"\n",
    "                f\"  Start Time: {session['start_time']}\\n\"\n",
    "                f\"  Duration: {session['duration']} seconds\\n\"\n",
    "                f\"  Power: {session['power']}%\\n\"\n",
    "                f\"  Mode: {session['stage']}\\n\"\n",
    "                f\"{'-'*40}\\n\"\n",
    "            )\n",
    "\n",
    "\n",
    "# ==================== MAIN APPLICATION ====================\n",
    "\n",
    "def main():\n",
    "    \"\"\"Main application entry point\"\"\"\n",
    "    root = tk.Tk()\n",
    "    app = UserInterface(root)\n",
    "    \n",
    "    # Set window icon and title\n",
    "    root.title(\"Smart Microwave Oven System - Team Project\")\n",
    "    \n",
    "    # Center window on screen\n",
    "    root.update_idletasks()\n",
    "    width = root.winfo_width()\n",
    "    height = root.winfo_height()\n",
    "    x = (root.winfo_screenwidth() // 2) - (width // 2)\n",
    "    y = (root.winfo_screenheight() // 2) - (height // 2)\n",
    "    root.geometry(f'{width}x{height}+{x}+{y}')\n",
    "    \n",
    "    # Start the application\n",
    "    root.mainloop()\n",
    "\n",
    "\n",
    "if __name__ == \"__main__\":\n",
    "    main()"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": null,
   "id": "dc8cd731-119b-48ff-a179-f714d34ba3dd",
   "metadata": {},
   "outputs": [],
   "source": [
    "python microwave_system.py"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": null,
   "id": "963a58a6-46da-4e69-a732-e99ef9f4235a",
   "metadata": {},
   "outputs": [],
   "source": []
  }
 ],
 "metadata": {
  "kernelspec": {
   "display_name": "Python 3 (ipykernel)",
   "language": "python",
   "name": "python3"
  },
  "language_info": {
   "codemirror_mode": {
    "name": "ipython",
    "version": 3
   },
   "file_extension": ".py",
   "mimetype": "text/x-python",
   "name": "python",
   "nbconvert_exporter": "python",
   "pygments_lexer": "ipython3",
   "version": "3.13.9"
  }
 },
 "nbformat": 4,
 "nbformat_minor": 5
}